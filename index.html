<!DOCTYPE HTML>
<!--
//
//                       _oo0oo_
//                      o8888888o
//                      88" . "88
//                      (| -_- |)
//                      0\  =  /0
//                    ___/`---'\___
//                  .' \\|     |// '.
//                 / \\|||  :  |||// \
//                / _||||| -:- |||||- \
//               |   | \\\  -  /// |   |
//               | \_|  ''\---/''  |_/ |
//               \  .-\__  '-'  ___/-. /
//             ___'. .'  /--.--\  `. .'___
//          ."" '<  `.___\_<|>_/___.' >' "".
//         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
//         \  \ `_.   \_ __\ /__ _/   .-` /  /
//     =====`-.____`.___ \_____/___.-`___.-'=====
//                       `=---='
//
//
//     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
//              佛祖保佑         永无BUG
-->
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="author" content="Xlch">
		<title>随机二次元图片API</title>
  		<link rel="shortcut icon" href="../favicon.ico">
		<meta name="keywords" content="图库,二次元图片,二次元API,动漫图片API,图片API">
		<meta name="description" content="随机二次元图片API,随机动漫壁纸,每天刷一刷，每次不一样。">
		<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="css/main.css">
	</head>
	<body class="night">
	    <div class="bg-container">
            <div class="bg" style="display:none"></div>
            <div class="bg2"></div>
        </div>
		<div class="container">
			<div class="well">
				<p>目前系统共收录2200+张图片</p>
				<p>图片均为https，采用jsDelivr CDN，高速访问</p>
				<p>API基本调用格式：</p>
				<pre>https://tool.silencetime.com/acg-api/random.php</pre>
				<p>参数：</p>
				<pre>type=json</pre>
				<p>JSON调用格式</p>
                <pre>https://tool.silencetime.com/acg-api/random.php?return=json</pre>
				<p>JSON数据</p>
				<pre style="text-shadow: initial;"><span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="json_key">"code"</span>:<span class="json_string">"200"</span><span class="json_note"> #图片状态码</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="json_key">"acgurl"</span>:<span class="json_string">"https:\/\/cdn.jsdelivr.net\/gh\/oyzbmmmm\/image-drive@master\/acg\/acg%20(56).jpg"</span><span class="json_note"> #图片地址</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="json_key">"width"</span>:<span class="json_string">"2048"</span><span class="json_note"> #图片宽</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="json_key">"height"</span>:<span class="json_string">"1152"</span><span class="json_note"> #图片高</span><br>}</span></pre>
			</div>
		</div>
		<div class="bottom">
        	<p>&copy; <span id="year"></span> <a target="_black" href="http://www.silencetime.com/">silencetime</a> 
              
		</div>
		<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
		<script>
    	    var d = new Date();
    	    console.log(d);
    	    var year = d.getFullYear();
    	    console.log(year);
    	    $('#year').text(year);
    	    $('document').ready(async function() {
                await changeBg();
    	    })
    	    async function getImage() { 
                let picUrl = '';
                let status = '';
                await fetch('https://tool.silencetime.com/acg-api/random.php?return=json')
                    .then(response => response.json())
                    .then(data => {
                        picUrl = 'url("' + data.imgurl + '")';
                        status = data.code
                    })
                    .catch(console.error)
                picUrl = await picUrl;
                status = await status;
                // console.log('获取图片状态：' + status);
                if (status != 200) {
                    return;
                }
                return picUrl;
            }
            //定时器切换图片
            // setInterval(changeBg, 7000); 
            async function changeBg() {
                let picUrl = getImage();
                let pic = await picUrl;
                setTimeout(function(){
                    $('.bg').css('background-image', pic);
                    $('.bg').fadeIn(1000);
                    setTimeout(function(){$('.bg2').css('background-image', pic)}, 1000);
                    setTimeout(function(){$('.bg').fadeOut(100)}, 1500);
                    changeBg();
                }, 7000)
            }
    	</script>
	</body>
</html>